# Kiwi â€” Qwen OpenCode Plugin í”„ë¡œì íŠ¸ ë¡œë“œë§µ

> ğŸ¥ **Kiwi**: ëª» ë‚ ì§€ë§Œ ë¶€ì§€ëŸ°í•œ íì‡„ë§ ì½”ë”© ì—ì´ì „íŠ¸
>
> íì‡„ë§ Qwen í™˜ê²½ì—ì„œ Oh My OpenCode ìˆ˜ì¤€ì˜ ì—ì´ì „íŠ¸ ê²½í—˜ì„ ì ì§„ì ìœ¼ë¡œ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ë§ˆìŠ¤í„° í”Œëœ

---

## í˜„ì¬ ìƒíƒœ

- âœ… íì‡„ë§ì—ì„œ OpenCode + qwen3-235b-a22b (ì‚¬ë‚´ ì›ê²©ì„œë²„, OpenAI-compatible endpoint) ê¸°ë³¸ ë™ì‘ ê²€ì¦ ì™„ë£Œ
- âœ… file í”ŒëŸ¬ê·¸ì¸ dist/index.js ë¡œë”© ë°©ì‹ ê²€ì¦ ì™„ë£Œ (Sisyphus ë¡œë“œ í™•ì¸)
- âœ… OpenCode ê¸°ë³¸ ë„êµ¬(read, write, edit, bash, grep, glob) ë™ì‘ í™•ì¸
- â„¹ï¸ ëª¨ë¸ ì„œë¹™ì€ ì‚¬ë‚´ ì¸í”„ë¼íŒ€ ê´€í• . ìš°ë¦¬ëŠ” ì—”ë“œí¬ì¸íŠ¸ ì†Œë¹„ìì¼ ë¿

---

## í•µì‹¬ ë¬¸ì œ ì¸ì‹

| ë¬¸ì œ | ì˜í–¥ | ìš°ì„ ìˆœìœ„ |
|------|------|---------|
| **Qwen tool í˜¸ì¶œ ì‹¤ìˆ˜** | ì˜ëª»ëœ ì¸ì, ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë„êµ¬ í˜¸ì¶œ, í¬ë§· ê¹¨ì§ | ğŸ”´ ìµœìš°ì„  |
| **max_tokens ì†Œì§„ â†’ ìë™ Compaction ë£¨í”„** | ì„¸ì…˜ ì˜¤ì—¼, ì‘ì—… ë”ëŒì§, ì»¨í…ìŠ¤íŠ¸ ìœ ì‹¤ | ğŸ”´ ìµœìš°ì„  |
| **ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ë¹„ëŒ€** | í† í° ë‚­ë¹„, Compaction ê°€ì†í™” | ğŸŸ¡ ë†’ìŒ |
| **ë‹¨ì¼ ì—ì´ì „íŠ¸ í•œê³„** | ë³µì¡í•œ íƒœìŠ¤í¬ ë¶„í•´ ë¶ˆê°€ | ğŸŸ¢ ì ì§„ í™•ì¥ |

---

## Oh My OpenCodeì—ì„œ ê°€ì ¸ì˜¬ ê¸°ëŠ¥ ì„ ë³„

### ğŸ”´ ì¦‰ì‹œ í•„ìš” (Phase 1~2)

| OMO ê¸°ëŠ¥ | ì›ë³¸ ìœ„ì¹˜ | ì™œ í•„ìš”í•œê°€ | ì ìš© ë°©ì‹ |
|----------|----------|------------|----------|
| **tool-output-truncator** | `hooks/tool-output-truncator` | tool outputì´ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì¡ì•„ë¨¹ëŠ” ì£¼ë²”. Qwenì€ ê¸´ output ì²˜ë¦¬ ì‹œ tool call ì •í™•ë„ ê¸‰ë½ | `tool.execute.after` í›…ì—ì„œ output í¬ê¸° ì œí•œ |
| **grep-output-truncator** | `hooks/grep-output-truncator` | grep ê²°ê³¼ê°€ ìˆ˜ë°± ì¤„ ë‚˜ì˜¤ë©´ ì»¨í…ìŠ¤íŠ¸ í­ë°œ | grep íŠ¹í™” ì˜ë¼ë‚´ê¸° |
| **tool call ê²€ì¦/ë³µêµ¬** | `hooks/empty-task-response-detector` + ì—ì´ì „íŠ¸ í”„ë¡¬í”„íŠ¸ | Qwenì˜ tool call í¬ë§· ì—ëŸ¬, ë¹ˆ ì‘ë‹µ, ì˜ëª»ëœ ì¸ì êµì • | `tool.execute.before`ì—ì„œ ì¸ì ê²€ì¦ + ì—ëŸ¬ ì‹œ ì¬ì‹œë„ ìœ ë„ |
| **ë¯¸ë‹ˆë©€ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸** | `agents/sisyphus.ts` ì°¸ê³ í•˜ë˜ ê·¹ë„ë¡œ ì¶•ì†Œ | í† í° ì ˆì•½ì´ ê³§ ìƒì¡´. OMOì˜ 504ì¤„ í”„ë¡¬í”„íŠ¸ëŠ” Qwenì—ì„œ ìì‚´í–‰ìœ„ | í•µì‹¬ ê·œì¹™ë§Œ 50ì¤„ ì´ë‚´ |
| **preemptive-compaction ì„ê³„ì¹˜ ê´€ë¦¬** | `hooks/preemptive-compaction` | Compaction ì „ì— tool outputì„ ë¨¼ì € ì •ë¦¬í•´ì„œ Compaction ìì²´ë¥¼ ì§€ì—° | `tool.execute.after`ì—ì„œ ëˆ„ì  í† í° ì¶”ì • â†’ ì„ ì œì  ì •ë¦¬ |

### ğŸŸ¡ ê³§ í•„ìš” (Phase 3~4)

| OMO ê¸°ëŠ¥ | ì›ë³¸ ìœ„ì¹˜ | ì™œ í•„ìš”í•œê°€ | ì ìš© ë°©ì‹ |
|----------|----------|------------|----------|
| **todo-continuation-enforcer** | `hooks/todo-continuation-enforcer` | Qwenì´ ì‘ì—… ì¤‘ê°„ì— ë©ˆì¶”ëŠ” ë¬¸ì œ ë³´ì™„ | `tool.execute.after`ì—ì„œ ë¯¸ì™„ë£Œ ê°ì§€ â†’ ê³„ì† ìœ ë„ |
| **AGENTS.md ì»¨í…ìŠ¤íŠ¸ ì£¼ì…** | `hooks/directory-agents-injector` | í”„ë¡œì íŠ¸ ë§¥ë½ ì œê³µ (ë‹¨, ìµœì†Œí•œìœ¼ë¡œ) | `chat.params`ì—ì„œ ì„ íƒì  ì£¼ì… |
| **compaction-context-injector** | `hooks/compaction-context-injector` | Compaction ì‹œ í•µì‹¬ ì»¨í…ìŠ¤íŠ¸ ë³´ì¡´ | `experimental.session.compacting` í›… |
| **session-recovery** | `hooks/session-recovery` | ì—ëŸ¬ í›„ ìë™ ë³µêµ¬ | `event` í›…ì—ì„œ session.error ì²˜ë¦¬ |
| **delegate_task ë‹¨ì¼ ì—ì´ì „íŠ¸ ë²„ì „** | `tools/delegate-task` | ì„œë¸ŒíƒœìŠ¤í¬ ë¶„ë¦¬ ì²« ê±¸ìŒ (ê°™ì€ ëª¨ë¸, ë³„ë„ ì„¸ì…˜) | ì»¤ìŠ¤í…€ ë„êµ¬ë¡œ ë“±ë¡ |

### ğŸŸ¢ ì ì§„ í™•ì¥ (Phase 5+)

| OMO ê¸°ëŠ¥ | ì›ë³¸ ìœ„ì¹˜ | ì™œ í•„ìš”í•œê°€ | ì ìš© ë°©ì‹ |
|----------|----------|------------|----------|
| **ë©€í‹°ì—ì´ì „íŠ¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜** | `agents/sisyphus.ts` + `atlas.ts` | ë³µì¡í•œ íƒœìŠ¤í¬ ë¶„í•´, ê³„íš-ì‹¤í–‰ ë¶„ë¦¬ | ë™ì¼ Qwen ëª¨ë¸ë¡œ ì—­í•  ë¶„ë¦¬ (í”„ë¡¬í”„íŠ¸ ê¸°ë°˜) |
| **3-Tier ì—ì´ì „íŠ¸ ê³„ì¸µ** | `agents/` ì „ì²´ | ì½ê¸°ì „ìš© ë¦¬ì„œì¹˜ / ì‹¤í–‰ / ìë¬¸ ë¶„ë¦¬ | tool permission ê¸°ë°˜ ì—­í•  ì œí•œ |
| **background agent** | `features/background-agent/` | ë³‘ë ¬ íƒìƒ‰ (explore + librarian íŒ¨í„´) | OpenCodeì˜ ì„œë¸Œì—ì´ì „íŠ¸ ì„¸ì…˜ í™œìš© |
| **LSP í†µí•©** | `tools/lsp/` | ì½”ë“œ ì¸í…”ë¦¬ì „ìŠ¤ (goto def, references) | ë³„ë„ Phase |
| **dynamic-context-pruning** | `hooks/preemptive-compaction` + DCP | ì§€ëŠ¥ì  ì»¨í…ìŠ¤íŠ¸ ì •ë¦¬ | ì‹¤í—˜ì  ê¸°ëŠ¥ìœ¼ë¡œ ì¶”í›„ |

---

## Phase êµ¬ì„±

```
Phase 1: Tool Call ì•ˆì •í™” + í† í° ì ˆì•½ ê¸°ë°˜           âœ… ì™„ë£Œ
    â†“
Phase 2: ë°±ê·¸ë¼ìš´ë“œ ì„œë¸Œì—ì´ì „íŠ¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜        â† í˜„ì¬
    â†“
Phase 3: ì—­í•  ë¶„ë¦¬ + ì“°ê¸° ìœ„ì„
    â†“
Phase 4: í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸ + ì‘ì—…ì™„ë£Œ ê°•ì œ
    â†“
Phase 5: Compaction í›„ ë„êµ¬ ì‚¬ìš©ë²• ì¬ì£¼ì… + ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬
    â†“
Phase 6+: LSP, ê³ ê¸‰ ê¸°ëŠ¥
```

### Phase 1 â€” Tool Call ì•ˆì •í™” + í† í° ì ˆì•½ ê¸°ë°˜ âœ…
> ì™„ë£Œ. Qwen ì „ìš© ë„êµ¬ ì‚¬ìš© ê°€ì´ë“œ + tool output í¬ê¸° ì œí•œ.

### Phase 2 â€” ë°±ê·¸ë¼ìš´ë“œ ì„œë¸Œì—ì´ì „íŠ¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ â† í˜„ì¬
> **ëª©í‘œ**: ë©”ì¸ ì—ì´ì „íŠ¸ê°€ ì½ê¸°ì „ìš© ì„œë¸Œì—ì´ì „íŠ¸ì—ê²Œ íƒìƒ‰/ë¶„ì„ ì‘ì—…ì„ ë³‘ë ¬ ìœ„ì„

- ë°±ê·¸ë¼ìš´ë“œ ì„¸ì…˜ ë§¤ë‹ˆì € (ë¹„ë™ê¸° ì„¸ì…˜ ìƒì„±/ê´€ë¦¬, ë™ì‹œ ì‹¤í–‰ ì œí•œ)
- ì»¤ìŠ¤í…€ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ë„êµ¬ (Qwenì´ ì‰½ê²Œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ë‹¨ìˆœ ì¸í„°í˜ì´ìŠ¤)
- ì„œë¸Œì—ì´ì „íŠ¸ ë„êµ¬ ì œí•œ (ì½ê¸°ì „ìš©, ì¬ê·€ ìœ„ì„ ì°¨ë‹¨)
- ê²°ê³¼ ìš”ì•½ ë°˜í™˜ (ë©”ì¸ ì»¨í…ìŠ¤íŠ¸ ì ˆì•½)

### Phase 3 â€” ì—­í•  ë¶„ë¦¬ + ì“°ê¸° ìœ„ì„
> **ëª©í‘œ**: ì„œë¸Œì—ì´ì „íŠ¸ê°€ ì½”ë“œ ìˆ˜ì •ê¹Œì§€ ìˆ˜í–‰. í”„ë¡¬í”„íŠ¸ ê¸°ë°˜ ì—­í•  ë¶„ë¦¬.

- ì‹¤í–‰ ì—ì´ì „íŠ¸ (write/edit í—ˆìš©, ì¬ìœ„ì„ ì°¨ë‹¨)
- í”„ë¡¬í”„íŠ¸ ê¸°ë°˜ ì—­í•  ë¶„ë¦¬ (planner / executor / reviewer)
- ê³„íš â†’ ì‹¤í–‰ â†’ ê²€ì¦ ë£¨í”„

### Phase 4 â€” í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸ + ì‘ì—…ì™„ë£Œ ê°•ì œ
> **ëª©í‘œ**: í”„ë¡œì íŠ¸ë¥¼ ì´í•´í•˜ê³ , ì‘ì—…ì„ ëê¹Œì§€ ì™„ë£Œí•˜ëŠ” ì—ì´ì „íŠ¸

- AGENTS.md ì„ íƒì  ì£¼ì…
- ì‘ì—… ë¯¸ì™„ë£Œ ê°ì§€ + ê³„ì† ìœ ë„ (todo-continuation-enforcer íŒ¨í„´)
- ì„¸ì…˜ ì—ëŸ¬ ë³µêµ¬

### Phase 5 â€” Compaction í›„ ë„êµ¬ ì‚¬ìš©ë²• ì¬ì£¼ì… + ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬
> **ëª©í‘œ**: ê¸´ ì„¸ì…˜ì—ì„œë„ tool call ì •í™•ë„ ìœ ì§€

- Compaction í›„ ë„êµ¬ ì‚¬ìš© ê°€ì´ë“œ ì¬ì£¼ì…
- ëˆ„ì  í† í° ì¶”ì • + ì„ ì œì  tool output ì •ë¦¬
- before/after í•˜ë“œ ê°€ë“œë ˆì¼ (read ì„ í–‰ ê°•ì œ, ë°˜ë³µ ì°¨ë‹¨ ë“±)

### Phase 6+ â€” ê³ ê¸‰ ê¸°ëŠ¥
- LSP í†µí•©
- Dynamic Context Pruning
- ë©€í‹°ëª¨ë¸ ì§€ì› (ì¶”ê°€ ëª¨ë¸ ì„œë¹™ ì‹œ)

---

## ê¸°ìˆ  ì œì•½ì‚¬í•­

| í•­ëª© | ì œì•½ | ëŒ€ì‘ |
|------|------|------|
| ëª¨ë¸ | qwen3-235b-a22b ë‹¨ì¼ (ì‚¬ë‚´ ì›ê²©ì„œë²„ ì œê³µ, OpenAI-compatible) | í”„ë¡¬í”„íŠ¸ ê¸°ë°˜ ì—­í•  ë¶„ë¦¬ |
| ì»¨í…ìŠ¤íŠ¸ | max_tokens ì œí•œ (Compaction ìœ ë°œ) | í† í° ì ˆì•½ì´ ëª¨ë“  ì„¤ê³„ì˜ ì œ1ì›ì¹™ |
| ë„¤íŠ¸ì›Œí¬ | íì‡„ë§ (ì¸í„°ë„· ì—†ìŒ, ì‚¬ë‚´ë§ë§Œ ì ‘ê·¼ ê°€ëŠ¥) | ë¹Œë“œëŠ” ì¸í„°ë„· PC â†’ distë§Œ ë°˜ì… |
| ë¹Œë“œ | ì¸í„°ë„· PCì—ì„œ bun build â†’ dist/index.js | ë‹¨ì¼ íŒŒì¼ ë²ˆë“¤, external í”ŒëŸ¬ê·¸ì¸ SDK |
| ë°°í¬ | .opencode/plugins/ì— íŒŒì¼ ë³µì‚¬ | OpenCode ì¬ì‹œì‘ìœ¼ë¡œ ë¡œë”© |

---

## ì°¸ì¡°

- [Oh My OpenCode (GitHub)](https://github.com/code-yeongyu/oh-my-opencode)
- [Oh My OpenCode Architecture (DeepWiki)](https://deepwiki.com/code-yeongyu/oh-my-opencode)
- [OpenCode Plugin Docs](https://opencode.ai/docs/plugins/)
